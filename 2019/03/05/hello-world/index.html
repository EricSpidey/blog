<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="robots" content="index, follow"><title>网页在上传到服务器后无法正常跳转的解决方法（错误页面：404 Not Found nginx/版本号） • Spidey  World</title><meta name="description" content="网页在上传到服务器后无法正常跳转的解决方法（错误页面：404 Not Found nginx/版本号） - Spidey小深"><link rel="icon" href="/favicon.svg"><link rel="stylesheet" href="https://unpkg.com/nanoreset@3.0.1/nanoreset.min.css"><link rel="stylesheet" href="/css/theme.css"><link rel="search" type="application/opensearchdescription+xml" href="/atom.xml" title="Spidey  World"></head><body><div class="wrap" id="barba-wrapper"><header><h1 class="branding"><a href="/" title="Spidey  World"><img class="logo-image" src="/logo.svg" alt="logo"></a></h1><ul class="nav nav-list"><li class="nav-list-item"><a class="nav-list-link no-barba" href="/" target="_self">主页</a></li><li class="nav-list-item"><a class="nav-list-link no-barba" href="/archives" target="_self">目录</a></li><li class="nav-list-item"><a class="nav-list-link no-barba" href="https://github.com/NeighborSpidey" target="_blank">GITHUB</a></li><li class="nav-list-item"><a class="nav-list-link no-barba" href="/about" target="_self">关于</a></li></ul></header><div class="barba-container"><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">网页在上传到服务器后无法正常跳转的解决方法（错误页面：404 Not Found nginx/版本号）</h1><div class="post-info"><a></a>2019-03-05</div><div class="post-content"><p>前段时间自己写了一个网站myheroes.xyz,上传到服务器后可以正常渲染首页，但无法跳转到其他页面，一跳就报404 Not Found nginx/版本号错误</p>
<h2 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h2><h3 id="首先想到有没有可能是路径的问题，因为我是用vue码的网站，而vue项目目录下的config-index-js里有两个关于路径的配置，一个是在本机调试时dev下assetsPublicPath的配置"><a href="#首先想到有没有可能是路径的问题，因为我是用vue码的网站，而vue项目目录下的config-index-js里有两个关于路径的配置，一个是在本机调试时dev下assetsPublicPath的配置" class="headerlink" title="首先想到有没有可能是路径的问题，因为我是用vue码的网站，而vue项目目录下的config/index.js里有两个关于路径的配置，一个是在本机调试时dev下assetsPublicPath的配置"></a>首先想到有没有可能是路径的问题，因为我是用vue码的网站，而vue项目目录下的config/index.js里有两个关于路径的配置，一个是在本机调试时dev下assetsPublicPath的配置</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">dev: &#123;</span><br><span class="line"></span><br><span class="line">  	 ...</span><br><span class="line">   	 assetsPublicPath: &apos;/&apos;,</span><br><span class="line"> 	 ...</span><br></pre></td></tr></table></figure>
<p>这里用’/‘是对的，默认也是这个，如果不小心改错了，调试时页面会渲染出cannot get /的错误</p>
<h3 id="还有一个是打包上传到服务器时的路径配置，在build代码段里的assetsPublicPath"><a href="#还有一个是打包上传到服务器时的路径配置，在build代码段里的assetsPublicPath" class="headerlink" title="还有一个是打包上传到服务器时的路径配置，在build代码段里的assetsPublicPath"></a>还有一个是打包上传到服务器时的路径配置，在build代码段里的assetsPublicPath</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">build: &#123;</span><br><span class="line">  	...</span><br><span class="line">    assetsPublicPath: &apos;/&apos;,</span><br><span class="line">    ...</span><br></pre></td></tr></table></figure>
<p>这里也是’/‘，默认也是，至于为什么不用改为’./‘，很明显vue的配置文件已经把’/‘看做根目录，所有的路径查询都会从根目录开始，而加个’.’后配置文件就识别不了了</p>
<p>确认自己没有手滑加’.’后，自己也在本机上运行项目，网页的跳转也没有问题，这时就把问题转移到服务器的配置文件上</p>
<h3 id="nginx-conf配置文件"><a href="#nginx-conf配置文件" class="headerlink" title="nginx.conf配置文件"></a>nginx.conf配置文件</h3><p>nginx.conf配置文件上有关跳转的配置就集中在location代码段上，在网上查询了其他人的nginx配置后，终于找到了问题，因为我的vue项目路由使用了history模式，而与之匹配的，就需要我在配置文件里将客户端所请求的url进行重定向操作，这个重定向操作作用在用户执行网页跳转时，而我漏掉了这个配置，所以我只能渲染出首页，再进行跳转就会报错</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">location / &#123;</span><br><span class="line">	...</span><br><span class="line">  	try_files $uri $uri/ /index.html last;</span><br><span class="line">  	...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>之后再重启nginx后，页面就可以正常跳转了</p>
</div></article></div></main><footer><div class="paginator"><a class="prev" href="/2019/03/08/webariticle/">prev</a></div><div class="copyright"><p>&copy; 2019 <a href="https://wikihero.top">Spidey小深</a><br>Powered by <a href="https://hexo.io/" rel="noreferrer" target="_blank">Hexo</a></p></div></footer></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/barba.js/1.0.0/barba.min.js"></script><script>document.addEventListener('DOMContentLoaded', function() {
    Barba.Pjax.start()
})</script></body></html>